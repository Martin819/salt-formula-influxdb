

{%- load_yaml as base_defaults %}
default:
  pkgs:
  - influxdb
  service: influxdb
  http:
    enabled: true
    bind:
      address: 0.0.0.0
      port: 8086
    log_enabled: false
  udp:
    enabled: false
    bind:
      address: 0.0.0.0
      port: 9096
  admin:
    enabled: true
    bind:
      address: 0.0.0.0
      port: 8083
  data:
    enabled: true
  meta:
    enabled: true
{%- endload %}

{%- set server = salt['grains.filter_by'](base_defaults, merge=salt['pillar.get']('influxdb:server')) %}
